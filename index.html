<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>TI-89</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#000000" />
  <link rel="apple-touch-icon" href="icons/icon-180.png" />
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <style>html,body{height:100%;margin:0;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:14px}</style>
</head>
<body>
  <!-- Install Instructions (shown in regular browser) -->
  <div id="installScreen" style="display:none;">
    <div style="text-align:center;max-width:350px;">
      <div style="font-size:72px;margin-bottom:20px;font-weight:bold;">89</div>
      <div style="font-size:24px;margin-bottom:30px;">TI-89 Calculator</div>

      <div style="background:#1a1a1a;border-radius:12px;padding:25px;margin-bottom:25px;">
        <div style="font-size:18px;margin-bottom:15px;">üì± Install as App</div>
        <div style="font-size:14px;line-height:1.6;margin-bottom:20px;opacity:0.9;">
          Tap the Share button below, then select "Add to Home Screen" to install this as a native app.
        </div>
        <div style="font-size:40px;margin-bottom:10px;">‚¨áÔ∏è</div>
        <div style="background:#007AFF;color:#fff;padding:8px 16px;border-radius:20px;display:inline-block;font-size:14px;">
          üì§ Share
        </div>
      </div>

      <button onclick="window.location.href='https://ti89-simulator.com/'" style="
        background:#333;
        color:#fff;
        border:2px solid #666;
        padding:12px 24px;
        font-size:14px;
        border-radius:8px;
        cursor:pointer;
        font-family:inherit;
        opacity:0.7;
      ">Or open simulator directly</button>
    </div>
  </div>

  <!-- Loading Screen (shown in PWA mode) -->
  <div id="loadingScreen" style="display:none;">
    <div style="text-align:center;">
      <div style="font-size:72px;margin-bottom:20px;font-weight:bold;">89</div>
      <div style="font-size:18px;opacity:0.8;">Loading TI-89 Simulator...</div>
    </div>
  </div>

  <noscript>This app requires JavaScript to open the TI-89 simulator.</noscript>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js");
    }

    // Check if we're in standalone mode (PWA)
    const isStandalone = window.navigator.standalone === true ||
                        window.matchMedia('(display-mode: standalone)').matches;

    const installScreen = document.getElementById('installScreen');
    const loadingScreen = document.getElementById('loadingScreen');

    if (isStandalone) {
      // PWA mode: Show loading screen and auto-redirect
      loadingScreen.style.display = 'block';

      setTimeout(() => {
        window.location.href = "https://ti89-simulator.com/";
      }, 1500);

    } else {
      // Browser mode: Show install instructions
      installScreen.style.display = 'block';
    }
  </script>
</body>
</html>
